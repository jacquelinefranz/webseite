---
interface Props {
  /** Zeitraum der Station */
  year: string;
  /** Titel der Station */
  title: string;
  /** Beschreibung der Station */
  description: string;
  /** Markiert als aktuell */
  isCurrent?: boolean;
  /** Kategorie für visuelle Kennzeichnung */
  category: 'technical' | 'creative' | 'product';
  /** CSS-Klasse für das Wrapper-Element */
  class?: string;
}

const {
  year,
  title,
  description,
  isCurrent = false,
  category,
  class: className
} = Astro.props;

// Kategorie-Farben basierend auf Variant-1 Tokens
const categoryColors = {
  technical: 'var(--color-primary)',
  creative: 'var(--color-accent)',
  product: 'var(--color-success)'
};
---

<article
  class:list={['timeline-item', isCurrent && 'timeline-item--current', className]}
  style={`--category-color: ${categoryColors[category]};`}
>
  <div class="timeline-item__marker">
    <span class="timeline-item__year">{year}</span>
  </div>

  <div class="timeline-item__card">
    <div class="timeline-item__category" data-category={category}>
      {category === 'technical' && 'Technisch'}
      {category === 'creative' && 'Kreativ'}
      {category === 'product' && 'Produkt'}
    </div>

    <h3 class="timeline-item__title">{title}</h3>
    <p class="timeline-item__description">{description}</p>

    {isCurrent && (
      <span class="timeline-item__badge">Aktuell</span>
    )}
  </div>
</article>

<style>
  .timeline-item {
    position: relative;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: var(--spacing-lg);
    align-items: start;
  }

  /* Marker & Year */
  .timeline-item__marker {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
  }

  .timeline-item__marker::before {
    content: '';
    width: 1rem;
    height: 1rem;
    background-color: var(--category-color);
    border-radius: var(--border-radius-full);
    border: var(--border-width-medium) solid var(--color-background-surface);
    box-shadow: var(--shadow-md);
    transition: var(--transition-transform);
  }

  .timeline-item:hover .timeline-item__marker::before {
    transform: scale(1.2);
  }

  .timeline-item--current .timeline-item__marker::before {
    width: 1.5rem;
    height: 1.5rem;
    background-color: var(--color-primary);
    box-shadow: 0 0 0 4px var(--color-primary-focus),
                var(--shadow-lg);
  }

  .timeline-item__year {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-secondary);
    white-space: nowrap;
  }

  /* Card */
  .timeline-item__card {
    position: relative;
    background-color: var(--color-background-surface);
    border: var(--border-width-thin) solid var(--color-border);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);
    box-shadow: var(--shadow-sm);
    transition: var(--transition-all);
  }

  .timeline-item__card:hover {
    transform: scale(1.02);
    box-shadow: var(--shadow-md);
  }

  /* Category Badge */
  .timeline-item__category {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-sm);
    background-color: var(--color-background-elevated);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--category-color);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--spacing-sm);
  }

  /* Content */
  .timeline-item__title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-sm);
    line-height: var(--line-height-tight);
  }

  .timeline-item__description {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    line-height: var(--line-height-normal);
    margin: 0;
  }

  /* Current Badge */
  .timeline-item__badge {
    display: inline-block;
    margin-top: var(--spacing-md);
    padding: var(--spacing-xs) var(--spacing-sm);
    background-color: var(--color-primary);
    color: var(--color-background-surface);
    border-radius: var(--border-radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Responsive */
  @media (max-width: 640px) {
    .timeline-item {
      grid-template-columns: 1fr;
      gap: var(--spacing-md);
    }

    .timeline-item__marker {
      flex-direction: row;
      gap: var(--spacing-md);
    }

    .timeline-item__marker::before {
      order: -1;
    }
  }
</style>
