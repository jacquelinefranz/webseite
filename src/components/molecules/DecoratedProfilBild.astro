---
import ProfilBild from '../atoms/ProfilBild.astro';
import BlobDecoration from '../atoms/BlobDecoration.astro';
import type { ImageMetadata } from 'astro';

interface Props {
  /** Der Pfad zum Profilbild */
  imageSrc?: string | ImageMetadata;
  /** Der Alternativtext für das Bild */
  imageAlt?: string;
  /** Größe der Blob-Dekoration */
  blobSize?: 'sm' | 'md' | 'lg' | 'xl';
  /** Farbe der Blob-Dekoration */
  blobColor?: string;
  /** Aktiviert Animation der Blob-Dekoration */
  animated?: boolean;
  /** Maximale Bildbreite (nutze clamp() für fluides Verhalten) */
  maxImageWidth?: string;
  /** Ladeverhalten des Bildes */
  loading?: 'eager' | 'lazy';
  /** Explizite Breite für das img-Attribut */
  imageWidth?: number;
  /** CSS-Klasse für das Wrapper-Element */
  class?: string;
}

const {
  imageSrc,
  imageAlt = 'Profilbild von Jacqueline Franz',
  blobSize = 'xl',
  blobColor = 'var(--color-accent-light)',
  animated = true,
  maxImageWidth = 'clamp(250px, 60vw, 400px)',
  loading = 'eager',
  imageWidth = 800,
  class: className
} = Astro.props;
---

<div class:list={['decorated-profil-bild', className]}>
  <div class="decorated-profil-bild__blob-decoration">
    <BlobDecoration
      size={blobSize}
      color={blobColor}
      animated={animated}
    />
  </div>
  <div class="decorated-profil-bild__image" style={`--max-image-width: ${maxImageWidth};`}>
    <ProfilBild
      src={imageSrc}
      alt={imageAlt}
      width={imageWidth}
      loading={loading}
    />
  </div>
</div>

<style>
  .decorated-profil-bild {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl);
  }

  .decorated-profil-bild__blob-decoration {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: var(--z-base);
    opacity: 0.6;
  }

  .decorated-profil-bild__image {
    position: relative;
    z-index: calc(var(--z-base) + 1);
    width: 100%;
    max-width: var(--max-image-width);
    aspect-ratio: 1;
    border-radius: var(--border-radius-blob);
    overflow: hidden;
    box-shadow: var(--shadow-xl);
    border: var(--border-width-medium) solid var(--color-background-surface);
  }
</style>
