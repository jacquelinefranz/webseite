---
import { Icon } from 'astro-icon/components';

interface Props {
  /** Die Variante des Buttons */
  variant?: 'primary' | 'secondary';
  /** Der Button-Typ */
  type?: 'button' | 'submit' | 'reset';
  /** Die Ziel-URL für Links */
  href?: string;
  /** Icon-Name (optional) */
  icon?: string;
  /** Icon-Position */
  iconPosition?: 'left' | 'right';
  /** CSS-Klasse für das Wrapper-Element */
  class?: string;
  /** Deaktiviert den Button */
  disabled?: boolean;
}

const {
  variant = 'primary',
  type = 'button',
  href,
  icon,
  iconPosition = 'right',
  class: className,
  disabled = false
} = Astro.props;

const Tag = href ? 'a' : 'button';
---

<Tag
  class:list={['button', `button--${variant}`, className]}
  type={!href ? type : undefined}
  href={href}
  disabled={!href && disabled ? disabled : undefined}
  aria-disabled={disabled}
>
  {icon && iconPosition === 'left' && <Icon name={icon} class="button__icon button__icon--left" />}
  <span class="button__text">
    <slot />
  </span>
  {icon && iconPosition === 'right' && <Icon name={icon} class="button__icon button__icon--right" />}
</Tag>

<style>
  .button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-lg);
    border: var(--border-width-medium) solid transparent;
    border-radius: var(--border-radius-lg);
    font-family: var(--font-family-base);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    text-decoration: none;
    cursor: pointer;
    transition: var(--transition-all);
    white-space: nowrap;
  }

  /* Primary Variant */
  .button--primary {
    background-color: var(--color-primary);
    color: var(--color-background-surface);
    border-color: var(--color-primary);
  }

  .button--primary:hover:not(:disabled) {
    background-color: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .button--primary:active:not(:disabled) {
    background-color: var(--color-primary-active);
    border-color: var(--color-primary-active);
    transform: translateY(0);
  }

  .button--primary:focus-visible {
    outline: 2px solid var(--color-primary-focus);
    outline-offset: 2px;
  }

  /* Secondary Variant */
  .button--secondary {
    background-color: transparent;
    color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .button--secondary:hover:not(:disabled) {
    background-color: var(--color-primary);
    color: var(--color-background-surface);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .button--secondary:active:not(:disabled) {
    background-color: var(--color-primary-active);
    border-color: var(--color-primary-active);
    transform: translateY(0);
  }

  .button--secondary:focus-visible {
    outline: 2px solid var(--color-primary-focus);
    outline-offset: 2px;
  }

  /* Disabled State */
  .button:disabled,
  .button[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* Icon Styling */
  .button__icon {
    width: 1.2em;
    height: 1.2em;
    flex-shrink: 0;
  }

  .button__text {
    display: inline-block;
  }
</style>
