---
/**
 * Zwei-Spalten Layout Container
 *
 * Flexibles Spalten-Layout mit konfigurierbarem Verhältnis
 * Responsive: stacked auf Mobile
 * Nutzt Design Tokens für alle Abstände und Farben
 */

interface Props {
  /** Spalten-Verhältnis: "50-50" | "60-40" | "40-60" */
  ratio?: '50-50' | '60-40' | '40-60';
  /** Spalten umkehren (linke wird rechts) */
  reverse?: boolean;
  /** Abstand zwischen Spalten */
  gap?: 'sm' | 'md' | 'lg' | 'xl';
  /** CSS-Klasse für das Element */
  class?: string;
}

const {
  ratio = '50-50',
  reverse = false,
  gap = 'lg',
  class: className
} = Astro.props;

const ratioMap = {
  '50-50': 'split-section--ratio-50-50',
  '60-40': 'split-section--ratio-60-40',
  '40-60': 'split-section--ratio-40-60'
};

const gapMap = {
  sm: '--spacing-sm',
  md: '--spacing-md',
  lg: '--spacing-lg',
  xl: '--spacing-xl'
};
---

<div
  class:list={[
    'split-section',
    ratioMap[ratio],
    { 'split-section--reverse': reverse },
    className
  ]}
  style={`--split-gap: var(${gapMap[gap]})`}
>
  <div class="split-section__left">
    <slot name="left" />
  </div>

  <div class="split-section__right">
    <slot name="right" />
  </div>
</div>

<style>
  .split-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--split-gap);
    width: 100%;
  }

  /* Spalten-Verhältnisse */
  .split-section--ratio-50-50 {
    grid-template-columns: 1fr 1fr;
  }

  .split-section--ratio-60-40 {
    grid-template-columns: 1.5fr 1fr;
  }

  .split-section--ratio-40-60 {
    grid-template-columns: 1fr 1.5fr;
  }

  /* Reverse */
  .split-section--reverse {
    direction: rtl;
  }

  .split-section--reverse > * {
    direction: ltr;
  }

  /* Spalten */
  .split-section__left,
  .split-section__right {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }

  /* Responsive: Stack auf Mobile */
  @media (max-width: 768px) {
    .split-section {
      grid-template-columns: 1fr;
      gap: var(--spacing-section-vertical);
    }

    .split-section--reverse {
      direction: ltr;
    }
  }

  /* Responsive: Tablet */
  @media (min-width: 769px) and (max-width: 1024px) {
    .split-section {
      gap: var(--spacing-lg);
    }

    .split-section--ratio-60-40,
    .split-section--ratio-40-60 {
      grid-template-columns: 1.3fr 1fr;
    }
  }
</style>
